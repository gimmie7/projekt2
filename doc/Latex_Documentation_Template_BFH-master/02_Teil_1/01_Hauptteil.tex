\chapter{Übersicht Gesamtsystem}
\label{sec:teil1_uebersicht}

Das System besteht aus einem Smart Meter (EM340) und einem Gateway, auf welchem die Software zur Verbrauchsanalyse installiert ist. Die Verbraucher sind alle an der Phase L1 des Energiezählers angeschlossen. Prinzipiell ist der hier verwendete Energiezähler zwar so konzipiert, dass er auf drei verschiedenen Phasen Messungen durchführen könnte, in diesem Projekt wurde aber einfachheitshalber nur die Phase L1 genutzt.


\begin{figure}[H]
	\centering
	\includegraphics[width=1.0\textwidth]{Bilder/uebersicht.png} %70% der Textbreite
	\caption{Übersicht Gesamtsystem}
	\label{fig:teil1_pestle}
\end{figure}

Als Gateway dient hier ein Raspberry Pi, auf welchem das in Python geschriebene Programm läuft,mit welchem die Daten aus dem Zähler gelesen, verarbeitet und an das SIOT gesendet werden. Der Energiezähler stellt verschiedene Register bereit, aus welchen jeweils pro Phase der Stromverbrauch I [A], die Spannung U [V], die Wirk P [W]-, Schein S [VA]- und Blindleistung Q [var] herausgelesen werden können. Diese Werte bilden die Grundlage zur Signaturerstellung der einzelnen Verbraucher.

\chapter{Erstellen von Signaturen der Verbraucher}
\label{sec:teil1_uebersicht}
Aufgrund der physikalischen Gegebenheiten beeinflusst jeder Verbraucher Strom und Spannung auf unterschiedliche Art und Weise. Genauer gesagt unterscheidet man zwischen ohmschen-, kapazitiven- und induktiven Verbrauchern. Ohmsche Verbraucher bestehen aus einem oder mehreren Widerständen, d.h. elektrischen Komponenten, die im wesentlichen Hitze oder Licht erzeugen. Beispiele dafür sind der Ofen oder auch Glühbirnen. Beim rein "`ohmschen"' Verbraucher (dem ohne induktiven oder kapazitiven Anteil) sind Spannung und Strom stets "`in Phase"', d.h. es gibt keine Phasenverschiebung und somit keinen Blindleistungsanteil, was gleichzeitig auch bedeutet, dass die Wirkleistung gleich der Scheinleistung entspricht.
 
\begin{figure}[H]
	\centering
	\includegraphics[width=0.3\textwidth]{Bilder/wirk.png} %70% der Textbreite
	\caption{Spannung-/Stromverlauf ohmsche Widerstände, Quelle: www.lernhelfer.de}
	\label{fig:teil1_pestle}
\end{figure}

Induktive Verbraucher sind im wesentlichen elektromagnetische Verbraucher, d.h. elektrische Komponenten, die Elektromagnetismus erzeugen. Sie benötigen beim Anlauf unter Umständen ein Vielfaches an Anlaufstrom. Beispiele dafür sind Pumpen oder auch Ventilatoren. Bei rein induktiven Komponenten eilt die Spannung dem Strom voraus, wodurch sich eine Phasenverschiebung von 90 Grad ergibt. D.h. hier gibt es einen Blindleistungsanteil und somit ist die Wirkleistung ungleich der Scheinleistung.
\begin{figure}[H]
	\centering
	\includegraphics[width=0.3\textwidth]{Bilder/induktiv.png} %70% der Textbreite
	\caption{Spannung-/Stromverlauf induktive Widerstände, Quelle: www.lernhelfer.de}
	\label{fig:teil1_pestle}
\end{figure}

Kapazitive Verbraucher verhalten sich ähnlich wie induktive Verbraucher, mit dem Unterschied, dass hier keine Magnetfelder aufgebaut werden, sondern elektrische Felder. Bei kapazitiven Lasten eilt der Strom der Spannung voraus, wobei auch hier wieder eine Phasenverschiebung von 90 Grad entsteht. D.h. also, dass auch kapazitive Lasten einen Blindleistungsanteil besitzen und die Wirkleistung nicht der Scheinleistung entspricht. 

\begin{figure}[H]
	\centering
	\includegraphics[width=0.3\textwidth]{Bilder/kapazitiv.png} %70% der Textbreite
	\caption{Spannung-/Stromverlauf kapazitive Widerstände, Quelle: www.lernhelfer.de}
	\label{fig:teil1_pestle}
\end{figure}


Allerdings sind rein ohmsche, kapazitive und induktive Verbraucher eher selten und Misch-Verbraucher die Regel. D.h. also dass jeder Verbraucher in unterschiedlicher Weise Wirk-, Blind-, und Scheinleistung beeinflusst. Somit könnten zwei Verbraucher mit gleicher Wirkleistung trotzdem unterschieden werden aufgrund unterschiedlicher Blindleistungsanteilen. 



Um für jeden Verbraucher eine Signatur erstellen zu können, werden sie zu Beginn jeweils einzeln an das Smartmeter angeschlossen und die jeweiligen Register über einen Zeitraum von 30 Sekunden ausgelesen. Die so gewonnenen Daten werden anschliessend in einer Datenbank abgespeichert und einem Verbraucher eindeutig zugewiesen. Diese Signatur wird dann schlussendlich verwendet um den Gesamtstromverbrauch auf die einzelnen Verbraucher aufschlüsseln zu können. Für diese Projekt 2 Arbeit kamen folgende Verbraucher zum Einsatz: 

\begin{table}[h]
\begin{center}
	\begin{tabular}{ |l|r| }
	\hline
	\textbf{Verbraucher} & 
	\textbf{Angegebene Leistung [W]} 
	 \\ 
	\hline
	Stabmixer & 220  \\ \hline
	Toaster & 800  \\ \hline
	Wasserkocher & 1850 - 2200  \\ \hline
	Heizlüfter & 1200 \\ \hline
	Haarföhn & 1800 - 2200 \\ \hline
	Bügeleisen & 2300\\ \hline
	

	\end{tabular}
\end{center}
\caption{Verbraucher}
\label{table:ergebnisseKombinatorik}
\end{table}


Die zwei nachfolgenden Abbildungen illustrieren zwei Beispielsignaturen.

Der Haarföhn ist ein rein ohmscher Verbraucher und weist somit keinen Blindleistungsanteil auf. Die Wirk- und die Scheinleistung sind somit gleich hoch und überlagern sich in der Grafik.
\begin{figure}[H]
	\centering
	\includegraphics[width=0.5\textwidth]{Bilder/foehn.png} %70% der Textbreite
	\caption{Signatur Haarföhn}
	\label{fig:teil1_pestle}
\end{figure}

\newpage

Der Heizlüfter dagegen ist eine induktive Last. Wie man der Abbildung entnehmen kann besteht hier auch ein gewisser Blindleistungsanteil.
\begin{figure}[H]
	\centering
	\includegraphics[width=0.5\textwidth]{Bilder/Heizluefter.png} %70% der Textbreite
	\caption{Signatur Heizlüfter}
	\label{fig:teil1_pestle}
\end{figure}

\chapter{Disaggregation: NILM Ansätze}
\label{sec:teil1_ansaetze}

\section{Ansatz Kombinatorik}
\label{sec:teil1_kombinatorik}
Beim Ansatz mittels Kombinatorik werden alle möglichen Kombinationen aus den Verbrauchern bzw. deren Signaturen gebildet. Mathematisch ausgedrückt entspricht dies einer Kombination ohne Wiederholung und ohne fixe Anzahl Elemente. Dies führt zu der folgenden Formel:
$$\sum_{k=1}^{n} \binom{n}{k} $$

n entspricht der Anzahl Elemente aus der Auswahlmenge, also der Anzahl Signaturen, und k entspricht der Anzahl Elemente, aus der die Kombination besteht. Die kleinstmögliche Kombination an Signaturen ist somit 1 und die grösstmögliche ist n.
\par
Bei beispielsweise vier unterschiedlichen Signaturen ergibt dies die folgende Anzahl an möglichen Kombinationen:
$$\sum_{k=1}^{n=4} \binom{n}{k} = 15$$

Der Algorithmus zum Herausfinden welche Verbraucher zu einem bestimmten Zeitpunkt X am Stromzähler angeschlossen sind und Strom verbrauchen, funktioniert folgendermassen: aus den gemessenen Zählerdaten zum Zeitpunkt X wird zu jeder Kombination der Signaturen die Differenz zwischen Wirkleistung P, Scheinleistung S, Blindleistung Q und Stromverbrauch I berechnet und summiert. Dies entspricht dann der Differenz zwischen einer Kombination und den effektiv gemessenen Messdaten.

\[Differenz = |P_t - P_k| + |S_t - S_k| + |Q_t - Q_k| + |I_t - I_k|\]

Diejenige Kombination mit der kleinsten Differenz zu den effektiven Messdaten wird als Sieger auserkoren.

\section{Ansatz Eventbasiert }
\label{sec:teil1_kombinatorik}
Beim eventbasierten Ansatz werden kontinuierlich Messungen durchgeführt und auf Events reagiert. Die gemessenen Werte werden zwischengespeichert und bei der nächsten Messung wird die Differenz daraus gebildet. Ist die Differenz grösser als der Schwellwert von 25W Wirkleistung, wird dies als ein Event interpretiert. 

\[Differenz_E = Messung_{t1} - Messung_{t2}\]

Die Differenz wird aus der Messung zum Zeitpunkt t1 und der Messung zum Zeitpunkt t2 gebildet.
Falls diese Differenz positiv ist, entspricht dies einem ON-Event, d.h. ein Verbraucher wurde hinzugeschaltet. Falls sie negativ ist, entspricht dies einem OFF-Event, d.h. ein Verbraucher wurde abgeschaltet. Die so ermittelte Differenz wird nun mit allen Signaturen verglichen. 

\[Differenz_V = |Verbraucher_V - Differenz_E|\]

Derjenige Verbraucher, dessen Differenz am nächsten bei der Differenz des Events liegt, wird als der eventauslösende Verbraucher identifiziert.

\chapter{Ergebnisse}
\label{sec:teil1_kombinatorik}

\section{Ansatz Kobinatorik}
Der Ansatz mittels Kombinatorik funktioniert nicht sehr gut und stösst bald mal an seine Grenzen. Werden jeweils nur die einzelnen Verbraucher angeschlossen, so werden diese noch alle einwandfrei identifiziert. Bei den Zweier-Kombinationen werden dagegen nur noch rund 80 \% erkannt. Bei den Dreier-Kombinationen treten dann schon die ersten grösseren Probleme auf. 
\begin{itemize}
\item Verbraucher mit hohem Verbrauch konnten nicht in Kombination getestet werden, da nur eine Phase verwendet wurde. Dies führte auf dieser Phase zu einer Überlast.
\item Der gemessene Verbrauch eines Verbrauchers ist in Kombination mit anderen Verbrauchern etwas niedriger als wenn der Verbraucher einzeln gemessen wird. Die Folge davon ist, dass andere Kombinationen teilweise näher am gemessenen Wert liegen als die eigentliche Kombination.
\item Die Anzahl an Kombinationen steigt mit zunehmender Anzahl Verbrauchern enorm an. Sind es bei sieben Verbrauchern noch überschaubare 127 Kombinationen, so sind es bei 20 Verbrauchern bereits 1'048'575 Kombinationen. Dies wirkt sich negativ auf die Performance aus.
\end{itemize}

\section{Ansatz Eventbasiert}
Der in dieser Arbeit verwendete eventbasierte Ansatz ist sehr einfach gehalten und funktioniert wohl deshalb auch nicht einwandfrei. Einzelne Verbraucher werden jeweils einwandfrei identifiziert.
\begin{itemize}
\item Verbraucher mit sehr geringem Verbrauch können nicht identifiziert werden aufgrund der kleinen Differenzen. Um diese zu erkennen, müsste der Schwellwert zum Auslösen des Events viel kleiner gewählt werden. Dies würde aber dazu führen, dass kleine Schwankungen auch als Events interpretiert würden.
\item Multistatus-Verbraucher, d.h. Verbraucher mit mehreren Zuständen wie bspw. ein Staubsauger, können nicht erkannt werden, da jeder Zustandswechsel als Event interpretiert würde.
\item Verbraucher mit sehr ähnlichem Verbrauch können nur schwer unterschieden werden.
\end{itemize}

Der eventbasierte Ansatz hat sicher mehr Potential als der kombinatorische Ansatz. Bei Hinzunahme weiterer Features und durch Anpassung des Schwellwertes kann dieser Ansatz noch optimiert werden. Durch Verwendung entsprechender Filter könnten zudem Schwankungen in den Messungen geglättet werden. Durch diese Optimierungen könnten somit weitaus bessere Ergebnisse erzielt werden.

\chapter{Ansatz Machine Learning}
\label{sec:teil1_kombinatorik}
Die zuvor diskutierten Ansätze weisen, wie schon im vorherigen Kapitel erwähnt, noch einige Probleme auf und sind für eine präzise Disaggregation somit nur bedingt geeignet. Es wird ein Modell benötigt, welches robust ist, auch wenn die Anzahl der Geräte erhöht wird. Ausserdem sollten auch Multistatusgeräte klassifiziert werden können, wie beispielsweise ein Staubsauger oder eine Waschmaschine. Und auch Verbraucher mit ähnlichem Verbrauch sollte das Modell erkennen können. Deep Learning könte ein geeigneter Ansatz dafür sein. Deep Learning ist eigentlich ein Überbegriff für eine Reihe von maschinellen Lerntechniken. In Neuronalen Netzen bezeichnet es Netzwerke mit vielen Layern. Das Hauptziel der Verwendung dieser Art von Architektur besteht darin, eine Hierarchie von Features zu lernen, bei der jede einzelne Schicht die Eingaben für sich verarbeitet und die daraus resultierenden Ausgabedaten in Form von verbesserten Eingabedaten für den nächsten Layer bereitstellt. Deep Learning-Modelle sind sehr attraktiv, weil sie flexibel sind, das heißt, ähnliche Modelle können in einer Vielzahl von verschiedenen Problemen verwendet werden. Sie sind in der Lage, automatisch neue Feature-Repräsentationen zu erlernen, die in der Vergangenheit für jedes unterschiedliche Problem von Hand erstellt wurden.

Um NILM mittels Neuronalen Netzen abzubilden, werden allerdings sehr viele Daten benötigt. Trainingsdatensätze zu diesem Thema gibt es aber schon bereits, einer davon ist REDD. Dieser ist öffentlich verfügbar mit Daten über den Verbrauch von 10 Häusern in der USA, wo das System zweiphasig ist. Es enthält gesampelte Daten in niedriger Frequenz (1 Hz) für das ganze Haus und einzelne Geräte. Im Bereich Deep Learning unterscheidet man zwischen drei verschiedenen Lernmethoden:

\textbf{Supervised Learning:}  
Beim überwachten Lernen wird das Modell nicht nur mit dem aggregierten Verbrauch trainiert, sondern auch mit dem Verbrauch der einzelnen Geräte. Somit müssen Daten auf Geräteebene gesammelt werden, die dann als Trainingsdaten für das Modell verwendet werden.

\textbf{Unsupervised Learning:} 
Beim unüberwachten Lernen wird das Modell nur mit dem aggregierten Verbrauch trainiert, was bedeutet, dass kein vorheriges Training mit gelabelten Daten erforderlich ist. Diese Methode wäre sehr wünschenswert.

\textbf{Semi-Supervised Learning:} 
Beim halb überwachten Lernen verwendet das Modell eine Kombination von sowohl gelabelten als auch ungelabelten Daten für das Training. Im Fall von NILM ist es wohl die am besten geeignete Methode.

Das Neuronale Netz wird jeweils mit einem Trainingsdatensatz trainiert und dann auf Daten getestet, die das Netz noch nie zuvor gesehen hat. Im Bereich Deep Learning gibt es verschiedene Arten von Architekturen. Beispiele dafür sind Recurrent Neural Networks, Convolutional Neural Networks oder auch Recurrent Convolutional Neural Networks. All diese Architekturen haben jeweils entsprechende Vor- und Nachteile. Obwohl Deep Learning im allgemeinen es ein riesiges Potenzial hat, besteht das größte Problem darin, die richtige Architektur zu wählen und sie so zu trainieren, dass gute Ergebnisse erzielt werden können.



\chapter{Schlusswort}
\label{sec:teil1_kombinatorik}
Die ganze Thematik rund um NILM ist sehr aktuell. Obwohl die ersten Ansätze dazu bereits vor über 30 Jahren entwickelt wurden, gibt es bis heute noch keinen restlos überzeugenden Ansatz.

Vom Ansatz mittels Kombinatorik hatten wir uns bessere Ergebnisse erhofft. Durch Messen, Ausprobieren und Testen stellten wir aber fest, dass unser Verständnis über die elektrotechnischen Grundlagen nicht ganz ausreichend war und sich mehr dahinter verbirgt, als wir anfangs angenommen haben. Als Folge davon mussten wir uns noch intensiver in das Thema einlesen.

Der eventbasierte Ansatz hat unserer Ansicht nach weitaus mehr Potential als der kombinatorische Ansatz. In diesem Bereich gibt es auch schon mehrere Ansätze, die zumindest mit einfacheren Verbrauchern gute Ergebnisse liefern. Die Schwierigkeit liegt hier vor allem im Erkennen von Multistatus-Verbrauchern sowie Verbrauchern mit sehr geringem Verbrauch.

Der nächste Schritt wäre nun einen Ansatz mittels künstlicher Intelligenz, insbesondere Neuronalen Netzen, zu erarbeiten. Davon erhoffen wir uns weitaus bessere Ergebnisse. Die grösste Herausforderung bei diesem Ansatz stellt aber wohl die enorme Menge and Daten dar, welche benötigt werden, um so ein Netz zu trainieren. Unsere Recherchen haben aber ergeben, dass es in diesem Bereich bereits viele öffentliche Trainingsdatensätze gibt.    

% Einträge im Verzeichnis erscheinen lassen ohne hier eine Referenz einzufügen
\nocite{kopka:band1}
\nocite{raichle:bibtex_programmierung}
\nocite{MiKTeX}
\nocite{KOMA}
\nocite{TeXnicCenter}
\nocite{Marti06}
\nocite{Erbsland08}
\nocite{juergens:einfuehrung}
\nocite{juergens:fortgeschritten}









