\chapter{Übersicht Gesamtsystem}
\label{sec:teil1_uebersicht}

Das System besteht aus einem Smart Meter (EM340) und einem Gateway, auf welchem die Software zur Verbrauchsanalyse installiert ist. Die Geräte sind alle an der Phase L1 des Energiezählers angeschlossen. Prinzipiell ist der hier verwendete Energiezähler  zwar so konzipiert, dass er auf drei verschiedenen Phasen Messungen durchführen könnte, in diesem Projekt wurde aber auschliesslich die Phase L1 genutzt.


\begin{figure}[H]
	\centering
	\includegraphics[width=1.0\textwidth]{Bilder/uebersicht.png} %70% der Textbreite
	\caption{Übersicht Gesamtsystem}
	\label{fig:teil1_pestle}
\end{figure}

Als Gateway dient hier ein Raspberry Pi, auf welchem das in Python geschriebene Programm läuft,mit welchem die Daten aus dem Zähler gelesen, verarbeitet und an das SIOT gesendet werden. Der Energiezähler stellt verschiedene Register bereit, aus welchen jeweils pro Phase der Stromverbrauch I [A], die Spannung U [V], die Wirk P [W]-, Schein S [VA]- und Blindleistung Q [var] herausgelesen werden können. Diese Werte bilden die Grundlage zur Signaturerstellung der einzelnen Verbraucher.

\chapter{Erstellen von Signaturen der Verbraucher}
\label{sec:teil1_uebersicht}
Aufgrund der physikalischen Gegebenheiten beeinflusst jedes Haushaltsgerät Strom und Spannung auf unterschiedliche weise. Genauer gesagt unterscheidet man zwischen ohmschen-, kapazitiven- und induktiven Verbrauchern. Ohmsche Verbraucher bestehen aus einem oder mehreren Widerständen, d.h. elektrischen Komponenten, die im wesentlichen Hitze oder Licht erzeugen. Beispiele dafür sind der Ofen oder auch Glühbirnen. Beim rein "`ohmschen"' Verbraucher (dem ohne induktiven oder kapazitiven Anteil) sind Spannung und Strom stets "`in Phase"', d.h. es gibt keine Phasenverschiebung und somit keinen Blindleistungsanteil, was gleichzeitig auch bedeutet, dass die Wirkleistung gleich der Scheinleistung entspricht.
 
\begin{figure}[H]
	\centering
	\includegraphics[width=0.3\textwidth]{Bilder/wirk.png} %70% der Textbreite
	\caption{Spannung-/Stromverlauf ohmsche Widerstände}
	\label{fig:teil1_pestle}
\end{figure}

Induktive Verbraucher sind im wesentlichen elektromagnetische Verbraucher, d.h. elektrische Komponenten, die Elektromagnetismus erzeugen. Diese Geräte benötigen beim Anlauf unter Umständen ein vielfaches an Anlaufstrom. Beispiele dafür sind Pumpen oder auch Ventilatoren. Bei rein induktiven Komponenten eilt die Spannung dem Strom voraus, wodurch sich eine Phasenverschiebung von 90 Grad ergibt. D.h. hier gibt es einen Blindleistungsanteil und somit ist die Wirkleistung ungleich der Scheinleistung.
\begin{figure}[H]
	\centering
	\includegraphics[width=0.3\textwidth]{Bilder/induktiv.png} %70% der Textbreite
	\caption{Spannung-/Stromverlauf induktive Widerstände}
	\label{fig:teil1_pestle}
\end{figure}

Kapazitive Verbraucher verhalten sich ähnlich wie induktive Verbraucher, mit dem unterschied, dass hier keine Magnetfelder aufgebaut werden, sondern elektrische Felder. Bei kapazitiven Lasten eilt der Strom der Spannung voraus, wobei auch hier wieder eine Phasenverschiebung von 90 Grad entsteht. D.h. also, dass auch kapazitive Lasten einen Blindleistungsanteil besitzen und die Wirkleistung nicht der Scheinleistung entspricht. 

\begin{figure}[H]
	\centering
	\includegraphics[width=0.3\textwidth]{Bilder/kapazitiv.png} %70% der Textbreite
	\caption{Spannung-/Stromverlauf kapazitive Widerstände}
	\label{fig:teil1_pestle}
\end{figure}


Allerdings sind rein ohmsche, kapazitive und induktive Verbraucher eher selten und Misch-Verbraucher die Regel. D.h. also dass jeder Verbraucher in unterschiedlicher Weise Wirk-, Blin-, und Scheinleistung beeinflusst. Somit könnten zwei Verbraucher mit gleicher Wirkleistung trotzdem unterschieden werden aufgrund unterschiedlicher Blindleistungsanteilen. 



Um für jedes Haushaltsgerät eine Signatur erstellen zu können, werden die Geräte zu Beginn jeweils einzeln an das Smartmeter angeschlossen und die jeweiligen Register über einen Zeitraum von 30 Sekunden ausgelesen. Die so gewonnenen Daten werden anschliessend in einer Datenbank abgespeichert und einem Gerät eindeutig zugewiesen. Diese Signatur wird dann schlussendlich verwendet um den Gesamtstromverbrauch auf die einzelnen Verbraucher aufschlüsseln zu können. Für diess Projekt 2 Arbeit kamen folgende Haushaltsgeräte zum Einsatz: Haarföhn, Heizlüfter, Ventilator, Bügeleisen, Toaster, Wasserkocher und Stabmixer. Die zwei nachfolgenden Abbildungen illustrieren zwei Beispielsignaturen.

Die Lampe ist ein rein ohmscher Verbraucher und weist somit keinen Blindleistungsanteil auf.
\begin{figure}[H]
	\centering
	\includegraphics[width=0.5\textwidth]{Bilder/wasserkocher.png} %70% der Textbreite
	\caption{Signatur Lampe}
	\label{fig:teil1_pestle}
\end{figure}

Der Heizlüfter dagegen ist eine induktive Last und verbraucht eine durchschnittliche Wirkleistung von 1180 Watt. Wie man der Abbildung entnehmen kann besteht hier auch ein gewisser Blindleistungsanteil.
\begin{figure}[H]
	\centering
	\includegraphics[width=0.5\textwidth]{Bilder/Heizluefter.png} %70% der Textbreite
	\caption{Signatur Heizlüfter}
	\label{fig:teil1_pestle}
\end{figure}

\chapter{Disaggregation: Ansatz mittels Kombinatorik}
\label{sec:teil1_kombinatorik}
Beim Ansatz mittels Kombinatorik werden alle möglichen Kombinationen aus den Geräten bzw. deren Signaturen gebildet. Mathematisch ausgedrückt entspricht dies einer Kombination ohne Wiederholung und ohne fixe Anzahl Elemente. Dies führt zu der folgenden Formel:
$$\sum_{k=1}^{n} \binom{n}{k} $$

n entspricht der Anzahl Elemente aus der Auswahlmenge, also der Anzahl Gerätesignaturen, und k entspricht der Anzahl Elemente, aus der die Kombination besteht. Die kleinstmögliche Kombination an Gerätesignaturen ist somit 1 und die grösstmögliche ist n.
\par
Bei beispielsweise vier unterschiedlichen Gerätesignaturen ergibt dies die folgende Anzahl an möglichen Kombinationen:
$$\sum_{k=1}^{n=4} \binom{n}{k} = 15$$

Der Algorithmus zum Herausfinden welche Geräte zu einem bestimmten Zeitpunkt X am Stromzähler angeschlossen sind und Strom verbrauchen, funktioniert folgendermassen: aus den gemessenen Zählerdaten zum Zeitpunkt X wird zu jeder Kombination der Gerätesignaturen die Differenz zwischen Wirkleistung P, Scheinleistung S, Blindleistung Q und Stromverbrauch I berechnet und summiert. Dies entspricht dann der Differenz zwischen einer Kombination und den effektiv gemessenen Messdaten.

\[Differenz = |P_t - P_k| + |S_t - S_k| + |Q_t - Q_k| + |I_t - I_k|\]

Diejenige Kombination mit der kleinsten Differenz zu den effektiven Messdaten wird als Sieger auserkoren.

\chapter{Ergebnisse}
\label{sec:teil1_kombinatorik}
Der Ansatz mittels Kombinatorik funktioniert erstaunlich gut, stösst aber auch bald mal an seine Grenzen. Wurden jeweils nur die einzelnen Geräte angeschlossen, so wurden diese alle einwandfrei identifiziert. Bei den zweier Kombinationen wurden dagegen nur noch 80 \% erkannt. Bei den dreier Kombinationen traten dann schon die ersten Probleme auf. Da nur eine Phase verwendet wurde, war es kaum möglich Geräte mit hohem Stromverbrauch in Kombination zu testen, da es immer die Sicherungen rausgehauen hat. Ausserdem ist aufgefallen, dass wenn Geräte in Kombination einen ähnlichen Verbrauch aufwiesen wieein einzelnes Gerät mit einem etwas höherem Verbrauch, so wurden die Kombnationen teilweise vertauscht. 


Ergebnisse Kombinatorik bei sieben Geräten:
\begin{table}[h]
\begin{center}
	\begin{tabular}{ | p{2cm} | p{2cm} | p{2cm} | p{2cm} | }
	\hline
	\textbf{Anz. Geräte pro Kombi.} & 
	\textbf{Anz. getestete Kombi.} & 
	\textbf{Anz. mögliche Kombi.} & 
	\textbf{Erkennungs-rate} \\ 
	\hline
	1 & 7 & 7 & x \% \\ \hline
	2 & x & 21 & x \% \\ \hline
	3 & x & 35 & x \% \\ \hline
	4 & x & 35 & x \% \\ \hline
	5 & x & 21 & x \% \\ \hline
	6 & x & 7 & x \% \\ \hline
	7 & x & 1 & x \% \\ \hline
	\textbf{Total} & \textbf{x} & \textbf{127} & \textbf{x \%} \\ \hline
	\end{tabular}
\end{center}
\caption{Ergebnisse Kombinatorik}
\label{table:ergebnisseKombinatorik}
\end{table}

Die Erkennungsrate bei sieben Geräten ist mit X \% relativ hoch.
Die nicht erkannten Kombinationen führen wir darauf zurück, dass der einzeln gemessene Verbrauch eines Gerätes nicht zwingend gleich sein muss wie der Verbrauch, den das Gerät in Kombination mit anderen Geräten aufweist. Weiter fallen nicht alle Parameter gleich fest ins Gewicht. Der Stromverbrauch mit 2A verglichen mit der Wirkleistung von 1000W fällt somit praktisch nicht mehr ins Gewicht, obwohl er vielleicht gerade entscheidend sein könnte.
\par
Das wohl grösste Problem beim Ansatz mittels Kombinatorik ist die Tatsache, dass die Anzahl an Kombinationen mit zunehmender Anzahl an Geräten bald einmal explodiert. Sind es bei sieben Geräten noch überschaubare 127 Gerätekombinationen, so sind es bei 20 Geräten bereits 1'048'575 Kombinationen. All diese Kombinationen in Echtzeit durchzurechnen dürfte schon schwer werden, und ein durchschnittlicher Haushalt hat in der Regel weit mehr als 20 Geräte im Einsatz.

\chapter{Ansatz Machine Learning}
\label{sec:teil1_kombinatorik}
-Wie würde dieser Ansatz funktionieren? beschreiben. NN und ML?

\chapter{Schlusswort}
\label{sec:teil1_kombinatorik}

Fazit, Schwierigkeiten, Ausblick Thesis
% Einträge im Verzeichnis erscheinen lassen ohne hier eine Referenz einzufügen
\nocite{kopka:band1}
\nocite{raichle:bibtex_programmierung}
\nocite{MiKTeX}
\nocite{KOMA}
\nocite{TeXnicCenter}
\nocite{Marti06}
\nocite{Erbsland08}
\nocite{juergens:einfuehrung}
\nocite{juergens:fortgeschritten}









